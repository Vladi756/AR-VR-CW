<!DOCTYPE html>
<html class="a-fullscreen" foxified>
    <head>
        <title>LSBU Virtual Tour</title>
        <script src="./aframe.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    </head>
    <body>

        <div id="msg" style="font-size:largest;">Loading, please wait...</div>

        <div id="body" style="display:none;">
        <!-- everything else -->
        </div>
            <script type="text/javascript">
                $(document).ready(function() {
                    $('#body').show();
                    $('#msg').hide();
            });
        </script>
        <a-scene>
            <!-- Asset Management System -->
            <a-assets>
                <video class="video" id="video1" src= "./assets/1.mp4" autoplay loop crossorigin="anonymous"></video>
                <video class="video" id="video2" src= "./assets/2.mp4" loop crossorigin="anonymous"></video>
                <video class="video" id="video3" src= "./assets/3.mp4" loop crossorigin="anonymous"></video>
                <video class="video" id="video4" src= "./assets/4.mp4" loop crossorigin="anonymous"></video>
                <video class="video" id="video5" src= "./assets/5.mp4" loop crossorigin="anonymous"></video>
            </a-assets>

            <!-- SCENE 1 -->
            <a-entity class="scene" id="scene1" visible="true">
                <!-- 360 Video -->
                <a-videosphere src="#video1"></a-videosphere>

                <!-- Navigation Mechanism -->
                <a-box color="red" position="-5 2 1" scale="0.5 0.5 0.5" onclick="scene_1()"></a-box>
                
            </a-entity>

            <!-- ============================================================================================================= -->

            <!-- SCENE 2 -->
            <a-entity class="scene" id="scene2" visible="false">
                <!-- 360 Video -->
                <a-videosphere src="#video2"></a-videosphere>

                <!-- Navigation Mechanism -->
                <a-box color="red" position="-5 3 1" scale="0.5 0.5 0.5" onclick="scene_2()"></a-box> 

            </a-entity>

            <!-- ============================================================================================================= -->

            <!-- SCENE 3 -->
            <a-entity class="scene" id="scene3" visible="false">
                <!-- 360 Video -->
                <a-videosphere src="#video3"></a-videosphere>

                <!-- Navigation Mechanism -->
                <a-box color="red" position="-5 1 1" scale="0.5 0.5 0.5" onclick="scene_3()"></a-box> 

            </a-entity>

            <!-- ============================================================================================================= -->


            <!-- SCENE 4 -->
            <a-entity class="scene" id="scene4" visible="false">
                <!-- 360 Video -->
                <a-videosphere src="#video4"></a-videosphere>

                <!-- Navigation Mechanism -->
                <a-box color="red" position="-5 0 3" scale="0.5 0.5 0.5" onclick="scene_4()"></a-box> 

            </a-entity>

            <!-- ============================================================================================================= -->


            <!-- SCENE 5 -->
            <a-entity class="scene" id="scene5" visible="false">
                <!-- 360 Video -->
                <a-videosphere src="#video5"></a-videosphere>

                <!-- Navigation Mechanism -->
                <a-box color="red" position="-5 -1 3" scale="0.5 0.5 0.5" onclick="scene_5()"></a-box> 

            </a-entity>

            <a-camera>
                <a-cursor></a-cursor>
            </a-camera>
            <!-- ============================================================================================================= -->

        </a-scene>
        <!--  =========================== SCRIPT =========================================== -->


        <script type="text/javascript">

            // ------------------------------------------------------------------------------ //
            // Helper Functions // 

            // stop videos
            function pauseVideo(){
                document.querySelectorAll('.video').forEach(video => {
                    video.pause();
                })
            }

            // hide scenes
            function hideScenes(){
                document.querySelectorAll('.scene').forEach(scene => {
                    scene.setAttribute('visible', 'false');
                })
            }

            // ----------------------------------------------------------------------------- // 
            // Change Scene Functions //

            // change to scene 2
            function scene_1(){
                // pause + hide everything
                pauseVideo();
                hideScenes();

                // Makes next scene visible
                document.querySelector('#scene2').setAttribute('visible', 'true');
                
                document.querySelector('#video2').play();
            }

             // change to scene 3
             function scene_2(){
                // pause + hide everything
                pauseVideo();
                hideScenes();

                // Makes next scene visible
                document.querySelector('#scene3').setAttribute('visible', 'true');
                // Plays the next video
                document.querySelector('#video3').play();
            }

            // change to scene 4
            function scene_3(){
                // pause + hide everything
                pauseVideo();
                hideScenes();

                // Makes next scene visible
                document.querySelector('#scene4').setAttribute('visible', 'true');
                // Plays the next video
                document.querySelector('#video4').play();
            }

            // change to scene 5
            function scene_4(){
                // pause + hide everything
                pauseVideo();
                hideScenes();

                // Makes next scene visible
                document.querySelector('#scene5').setAttribute('visible', 'true');
                // Plays the next video
                document.querySelector('#video5').play();
            }

            // change to scene 1
            function scene_5(){
                // pause + hide everything
                pauseVideo();
                hideScenes();

                // Makes next scene visible
                document.querySelector('#scene1').setAttribute('visible', 'true');
                // Plays the next video
                document.querySelector('#video1').play();
            }

        </script>
    </body>
</html>












